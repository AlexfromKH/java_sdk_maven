--- # Install JAva JDK SE11,and Maven

- hosts: ubuntu
  remote_user: ansible
  become: yes
  become_method: sudo
  gather_facts: yes
  connection: ssh
  tasks:

   - name: install JDK8
     apt:
       name: openjdk-8-jdk
       state: present
       update_cache: yes
     notify: 
       - add Add $JAVA_HOME environment variable

   - name: download marven in user home dir
     file:
       scr: http://apache.lauf-forum.at/maven/maven-3/3.6.0/binaries/apache-maven-3.6.0-bin.tar.gz
       dest: {{ ansible_env.HOME }}
     notify:
       - remove maven archive

   - name: unzip maven to user home dir
     unarchive:
       scr: apache-maven-3.6.0-bin.tar.gz
       dest: {{ ansible_env.HOME }}

   handlers:
   - name: add $JAVA_HOME environment variable
     shell: echo 'JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64/jre/bin' >> /etc/environment

   - name: remove maven archive
     file:
       scr: {{ ansible_env.HOME}}/apache-maven-3.6.0-bin.tar.gz
       state: absent
